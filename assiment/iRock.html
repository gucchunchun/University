<!DOCTYPE html>
<html>
  <head>
    <title>iRock - The Virtual Pet Rock</title>
    <script type="text/javascript" src="https://www.yama.info.waseda.ac.jp/~yamana/LECTURE/CSWP/cookie.js"></script>
    <script type="text/javascript">
      var userName;
	  var rock_happy="https://www.yama.info.waseda.ac.jp/~yamana/LECTURE/CSWP/rock_happy.png";
      var rock="https://www.yama.info.waseda.ac.jp/~yamana/LECTURE/CSWP/rock.png";
      
      function greetUser() {
        userName = readCookie("irock_username");
        if (userName) {
            alert("Hello, " + userName + "I missed you!");
        }else{
            alert('Hello, I am your pet rock.');
        }
        
      }
      function touchRock() {
        if (userName) {
          alert("I like the attention, " + userName + ". Thank you.");
        }
        else {
          userName = prompt("What is your name?", "Enter your name here.");
          if (userName)
            alert("It is good to meet you, " + userName + ".");
            writeCookie("irock_username", userName, 5*365);
        }
        document.getElementById("rockImg").src = rock_happy;
        setTimeout("document.getElementById('rockImg').src = rock;", 5 * 60 * 1000);
      }
      function resizerock() {
        console.log(document.body.clientHeight);
        console.log(window.innerHeight);
        // clientHeight だと画面いっぱいではなくてデフォルトのbodyが要素を持つ高さが表示されてしまう
        document.getElementById("rockImg").style.height = (window.innerHeight-100)*0.9 + "px";
      }
    </script>
  </head>
  <body onload="greetUser(), resizerock()" onresize="resizerock()">
    <div style="margin-top:100px; text-align:center">
      <img id="rockImg" src="https://www.yama.info.waseda.ac.jp/~yamana/LECTURE/CSWP/rock.png" 
      alt="iRock" style="cursor:pointer" onclick="touchRock();" />
    </div>
  </body>
</html>

